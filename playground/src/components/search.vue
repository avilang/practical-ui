<template>
  <box-component :name="`${name}`">
    <p-search :model="model" :item-width="350" @search="onSearch" @change="onReset" @reset="onReset" />
  </box-component>
</template>

<script setup>
import BoxComponent from './box-component.vue'

defineOptions({
  name: 'PSearchWithBox'
})

const name = 'PSearch'

const model = [
  {
    type: 'input',
    field: 'accountName',
    defaultValue: '136',
    props: { placeholder: 'æ‰‹æœºå·', maxlength: 11, clearable: true },
    label: 'è´¦å·'
  },
  {
    type: 'input',
    field: 'nickName',
    props: { maxlength: 20, clearable: true },
    label: 'æ˜µç§°'
  },
  {
    type: 'select',
    field: 'state',
    defaultValue: '',
    props: {
      options: [
        { label: 'ä¸é™', value: '' },
        { label: 'å¯ç”¨', value: 't' },
        { label: 'ç¦ç”¨', value: 'f' }
      ],
      clearable: false
    },
    label: 'çŠ¶æ€'
  },
  {
    type: 'select',
    field: 'deleted',
    defaultValue: 'f',
    props: {
      options: [
        { label: 'ä¸é™', value: '' },
        { label: 'å·²åˆ é™¤', value: 't' },
        { label: 'æœªåˆ é™¤', value: 'f' }
      ],
      clearable: false
    },
    label: 'æ˜¯å¦åˆ é™¤'
  }
]

function onSearch(query, payload = {}) {
  console.log('ğŸš€ ~ onSearch ~ payload:', payload)
  console.log('ğŸš€ ~ onSearch ~ query:', query)
}

function onReset(data, payload = {}) {
  if (payload.type === 'change' && payload.isChangByAction) return
  console.log(`ğŸš€ ~ ${payload.type} ~ payload:`, payload)
  console.log(`ğŸš€ ~ ${payload.type} ~ data:`, data)
}
</script>
